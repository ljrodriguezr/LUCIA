{% extends "base.html" %}

{% block titulo %}Resultado{% endblock %}

{% block contenido %}
    <h2>Datos Recibidos</h2>
    <p>Hola, {{ nombre }}! Tu email es {{ email }}.</p>
    
    <p>Ahora puedes guardar estos datos en diferentes formatos:</p>
    <ul>
        <li><a href="#" onclick="guardarDatos('txt')">Guardar en TXT</a></li>
        <li><a href="#" onclick="guardarDatos('json')">Guardar en JSON</a></li>
        <li><a href="#" onclick="guardarDatos('csv')">Guardar en CSV</a></li>
        <li><a href="#" onclick="guardarDatos('db')">Guardar en SQLite</a></li>
    </ul>

    <script>
        function guardarDatos(formato) {
            const formData = new FormData();
            formData.append('nombre', '{{ nombre }}');
            formData.append('email', '{{ email }}');

            fetch(`/guardar_${formato}`, {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                alert(data.mensaje || data.error);
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Ocurri√≥ un error al guardar los datos.');
            });
        }
    </script>
{% endblock %}